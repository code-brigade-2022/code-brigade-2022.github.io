<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Brigade 2022</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="p-4">

    <header>
        <center>
            <hr>
                <p style="font-size: 80px">
                    🛫
                </p>
                <h1>Code brigade</h1>
        
                <div class="navbar">
                    <div>
                        <a href="index.html">Home</a>
                    </div>
                    <div>
                        <a href="evaluacion.html">Evaluación 2019</a>
                    </div>
                    <div>
                        <a href="recursos.html">Apuntes</a>
                    </div>
                    <div>
                        <a href="ruta.html">Implementación</a>
                    </div>
                    <div>
                        <a target="_blank" href="https://github.com/code-brigade-2022">➡️ Github</a>
                    </div>
                    <div>
                        <a target="_blank" href="https://hackathoncopa.copaair.com/assets/3ra.%20Hackathon%202022%20%20Bases%20Legales.pdf">➡️ Reglas</a>
                    </div>
                </div>
            <hr>
        </center>
    </header>

    <center>
        <h3>
            Apuntes
        </h3>

        📚: Documentación o guía oficial | 📙: Tutorial | 🛠️: Troubleshooting | 🐧: Comando
    </center>

    <!-- ------------------------------ PUNTOS BASE ------------------------------ -->

    <!-- 1 -->

    <div class="how2div mt-4 mb-4 p-3 color1" id="apuntes1">
        <center>
            <h5>
                Construir la arquitectura desde cero
            </h5>
        </center>

        <h6>Back-end (producción):</h6>
        Nginx:
        <ul>
            <li>
                <a target="_blank" href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-18-04">📙 - Instalar Nginx</a>
            </li>
            <li>
                <a target="_blank" href="https://docs.nginx.com/nginx/admin-guide/web-server/web-server/">📚 - Nginx: Detallar archivo</a>
            </li>
            <li>
                <a target="_blank" href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-20-04 ">📙 - Certificado de seguridad de Nginx para HTTPS</a>
            </li>
        </ul>

        Base de datos:
        <ul>
            <li>
                <a target="_blank" href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu-20-04">📙 - Instalar MySql y crear usuario con permisos para BDD específica (ver últimos pasos)</a>
            </li>
        </ul>

        Node:
        <ul>
            <li>
                <a target="_blank" href="https://phoenixnap.com/kb/update-node-js-version ">📙 - Actualizar Node</a>
            </li>
            <li>
                <a target="_blank" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-node-js-application-for-production-on-ubuntu-18-04">📙 - Node como app de producción (Ubuntu 18.04)</a>
            </li>
            <li>
                <a target="_blank" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-node-js-application-for-production-on-ubuntu-22-04">📙 - Node como app de producción (Ubuntu 22.04)</a>
            </li>
        </ul>

        <hr>
        <h6>Front-end (producción):</h6>

        Crear un sitio estático:
        <ul>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blob-static-website-how-to?tabs=azure-portal">📚 - Crear un sitio estático en Storage Account</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/storage/blobs/storage-blob-static-website">📚 - Más información</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/answers/questions/696299/static-website-not-working.html">🛠️ - Troubleshooting: Cambiar Storage Account a público</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/static-web-apps/overview ">📚 - En App Service (otra manera de hacerlo)</a>
            </li>
        </ul>
    </div>

    <!-- 2 -->

    <div class="how2div mt-4 mb-4 p-3 color1" id="apuntes2">
        <h5>
            Disponibilidad
        </h5>
        Máquinas virtuales:
        <ul>
            <li>
                Configurar
            </li>
        </ul>

        Storage Account:
        <ul>
            <li>
                Configurar
            </li>
        </ul>

        CosmosDB:
        <ul>
            <li>
                Configurar
            </li>
        </ul>
    </div>

    <!-- 3 -->

    <div class="how2div mt-4 mb-4 p-3 color3" id="apuntes3">
        <h5>
            Configuración de redes (VNets, subredes, grupos de seguridad)
        </h5>
        VNets y subredes:
        <ul>
            <li>
                Configurar
            </li>
        </ul>

        Grupos de seguridad:
        <ul>
            <li>
                Configurar
            </li>
        </ul>

        Firewall:
        <ul>
            <li>
                Configurar
            </li>
        </ul>
    </div>

    <!-- 4 -->

    <div class="how2div mt-4 mb-4 p-3 color3" id="apuntes4">
        <h5>
            Monitoreo y tags
        </h5>
        <ul>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/nodejs">📚 - App Insights</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/nodejs#live-metrics">📚 - Live Metrics</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/decision-guides/resource-tagging/?toc=%2Fazure%2Fazure-resource-manager%2Fmanagement%2Ftoc.json">📚 - Nomenclatura de tags</a>
            </li>
            <li>
                <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/javascript?tabs=snippet">📚 - Client side JS</a>
            </li>
        </ul>
    </div>

    <!-- 5 -->

    <div class="how2div mt-4 mb-4 p-3 color2" id="apuntes5">
        <center>
            <h5>
                Usuarios y roles definidos
            </h5>
        </center>
        <ul>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/active-directory/external-identities/add-users-administrator">📚 - Invitar usuarios y crear grupo</a>
            </li>
            <li>
                <a target="_blank" href="https://www.youtube.com/watch?v=4v7ffXxOnwU">📙 - Asignar roles por recurso</a>
            </li>
            <li>
                <a target="_blank" href="https://stackoverflow.com/questions/63875668/azure-add-user-to-subscription">🛠️ - Posible troubleshoot 1</a>
            </li>
            <li>
                <a target="_blank" href="https://stackoverflow.com/questions/47424884/how-to-use-rbac-in-azure-for-user-in-another-tenant">🛠️ - Posible troubleshoot 2</a>
            </li>
        </ul>
    </div>

    <!-- 6 -->

    <div class="how2div mt-4 mb-4 p-3 color2" id="apuntes6">
        <center>
            <h5>
                CDN
            </h5>
        </center>
        <ul>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/storage/blobs/static-website-content-delivery-network">📚 - En sitio estático usando Storage Account</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/cdn/cdn-purge-endpoint ">🛠️ - Purgar CDN</a>
            </li>
        </ul>
    </div>

    <!-- 7 -->

    <div class="how2div mt-4 mb-4 p-3 color1" id="apuntes7">
        <center>
            <h5>
                Actualizar Sistema Operativo
            </h5>
        </center>

        Azure / Linux:
        <ul>
            <li>
                <a target="_blank" href="https://www.youtube.com/watch?v=OkNVCWXseRA">📙 - Updates y patches con Azure Update Management</a>
            </li>
            <li>
                <a target="_blank" href="https://www.geeksforgeeks.org/crontab-in-linux-with-examples/">📙 - Cronjob</a>
            </li>
            <li>
                🐧 - * * * * * sudo apt-get update && sudo systemctl restart nginx && pm2 restart
            </li>
        </ul>
    </div>

    <!-- 8 -->

    <div class="how2div mt-4 mb-4 p-3 color1" id="apuntes8">
        <center>
            <h5>
                Acceso remoto: Azure Bastion
            </h5>
        </center>
        <ul>
            <li>
                <a target="_blank" href="https://www.youtube.com/watch?v=epWKTGGa_wY">📚 - Acceder a VM con Azure Bastion</a>
            </li>
        </ul>
    </div>

    <!-- 9 -->

    <div class="how2div mt-4 mb-4 p-3 color1" id="apuntes9">
        <center>
            <h5>
                CI/CD: Automatizar el parchado, el almacenamiento, gestión de los recursos
            </h5>
        </center>
        <h6>Github Actions:</h6>
        <ul>
            <li>
                <a target="_blank" href="https://zellwk.com/blog/github-actions-deploy/">📙 - Automatizar el parchado con Github Actions</a>
            </li>
            <li>
                <a target="_blank" href="https://techcommunity.microsoft.com/t5/educator-developer-blog/how-to-login-to-azure-with-github-actions/ba-p/3573050">📙 - Automatizar storage con Github Actions</a>
            </li>
        </ul>
    </div>

    <!-- 10 -->

    <div class="how2div mt-4 mb-4 p-3 color3" id="apuntes10">
        <center>
            <h5>
                Infraestructura como Código
            </h5>
        </center>
        <h6>Terraform:</h6>
        <ul>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/developer/terraform/get-started-windows-powershell?tabs=bash">📚 - Terraform / Powershell</a>
            </li>
            <li>
                <a target="_blank" href="https://www.terraform.io/language/modules">📚 - Módulos</a>
            </li>
            <li>
                <a target="_blank" href="https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs">Providers / componentes</a>
            </li>
            <li>
                <a target="_blank" href="https://github.com/guillermo-musumeci/terraform-azure-vm-nginx-debian">Terraform Azure VM NGinx Repo</a>
            </li>
        </ul>
    </div>

    <!-- 11 -->

    <div class="how2div mt-4 mb-4 p-3 color3" id="apuntes11">
        <center>
            <h5>
                Controles de seguridad (GuardDuty, WAF, Config, KMS)
            </h5>
        </center>
        Notas:
        <ul>
            <li>
                AWS GuardDuty = Azure Advanced Threat Protection es con subscripción avanzada...
            </li>
        </ul>

        Azure KeyVault:
        <ul>
            <li>
                <a target="_blank" href="https://www.youtube.com/watch?v=34IrPO1Xh2o">Log Analytics</a>
            </li>
            <li>
                <a target="_blank" href="https://www.youtube.com/watch?v=VIEaz869njk&list=PLGjZwEtPN7j-Q59JYso3L4_yoCjj2syrM&index=25">Azure Firewall</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/key-vault/general/tutorial-javascript-virtual-machine?tabs=azure-cli">📚 - KeyVault</a>
            </li>
        </ul>
    </div>

    <!-- ------------------------------ ADEMÁS ------------------------------ -->

    <!-- 12 -->

    <hr>

    <div class="how2div mt-4 mb-4 p-3 color1" id="apuntes12">
        <center>
            <h5>
                Además...
            </h5>
        </center>
        <h6>Links útiles:</h6>
        <ul>
            <li>
                <a target="_blank" href="https://docs.microsoft.com/en-us/azure/virtual-machines/sizes ">📚 - Guía de tamaños de máquinas virtuales</a>
            </li>
            <li>
                <a target="_blank" href="https://azurespeedtest.azurewebsites.net/ ">📚 - Test de velocidad a servidores de Azure</a>
            </li>
        </ul>

        <hr>

        <h6>¡Notas importantes!</h6>
        <ul>
            <li>
                Permitir inbound security rule para HTTP, HTTPS y SSH
            </li>
            <li>
                Disable UFW
            </li>
            <li>
                Powershell: Set-Location -Path "C:\Users\galop\Desktop\Azure Hackathon\terratest"
            </li>
        </ul>

        <hr>

        <h6>Otros problemas</h6>

        No permite ingresar por SSH:
        <ul>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/troubleshoot/azure/virtual-machines/guest-os-firewall-blocking-inbound-traffic?WT.mc_id=Portal-Microsoft_Azure_Support ">🛠️ - El firewall (UFW) puede estar bloqueando entradas</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/troubleshoot/azure/virtual-machines/troubleshoot-ssh-connection#reset-the-ssh-configuration">🛠️ - Resetear configuración de SSH</a>
            </li>
            <li>
                <a target="_blank" href="https://stackoverflow.com/questions/64127284/unable-to-ssh-into-azure-vm-connection-timed-out ">🛠️ - Elevar prioridad de regla inbound</a>
            </li>
            <li>
                <a target="_blank" href="https://www.youtube.com/watch?v=hajL20Oe-G0 ">🛠️ - Entrar por serial console</a>
            </li>
        </ul>

        Red:
        <ul>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/network-watcher/diagnose-vm-network-traffic-filtering-problem ">🛠️ - Diagnóstico de red</a>
            </li>
        </ul>

        Verificar problemas en el servidor:
        <ul>
            <li>🐧 - sudo systemctl restart nginx</li>
            <li>🐧 - sudo nginx -t</li>
            <li>🐧 - pm2 info server</li>
        </ul>

        <hr>

        <h6>Procedimientos</h6>

        Al actualizar código de la VM:
        <ul>
            <li>🐧 - sudo systemctl restart nginx</li>
            <li>🐧 - pm2 info server</li>
            <li>🐧 - pm2 restart server</li>
            <li>Instalar módulos de node</li>
            <li>Actualizar username y password en db.js</li>
        </ul>

        Powershell y Azure CLI:
        <ul>
            <li>🐧 - Set-Location -Path "C:\Users\galop\Desktop\Azure Hackathon\terratest2"</li>
            <li>🐧 - az login</li>
            <li>🐧 - az group list --query "[?name=='ResourceGroup']"</li>
            <li>🐧 - az account show</li>
        </ul>

        <hr>

        <h6>Quizás importante</h6>

        <ul>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/virtual-machines/linux/tutorial-secure-web-server ">Tutorial secure web server</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/key-vault/general/tutorial-javascript-virtual-machine?tabs=azure-cli ">JS Virtual machine</a>
            </li>
        </ul>

        <hr>

        <h6>Posibles puntos extra</h6>

        <ul>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/cost-management-billing/costs/tutorial-acm-create-budgets">Azure budgets</a>
            </li>
            <li>
                <a target="_blank" href="https://www.youtube.com/watch?v=J40eJR4qQ0w&list=PLGjZwEtPN7j-Q59JYso3L4_yoCjj2syrM&index=31">Resource tags</a>
            </li>
            <li>
                <a target="_blank" href="https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/resource-abbreviations#azure-naming-tool">Nomenclatura de recursos</a>
            </li>
        </ul>

    </div>

</body>
</html>